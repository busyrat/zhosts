<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>video_demo</title>
  </head>
  <body>
    <video id="video1"></video>
  </body>
  <script>
    // https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/getUserMedia
    // 只有 HTTPS 和 本地 loaclhost 有效
    // https://sites.google.com/a/chromium.org/dev/Home/chromium-security/deprecating-powerful-features-on-insecure-origins
    navigator.mediaDevices
      .getUserMedia({
        audio: true,
        video: {
          width: { min: 1024, ideal: 1200, max: 1920 },
          height: { min: 576, ideal: 720, max: 1000 },
          frameRate: { max: 30 },
        },
      })
      .then((stream) => {
        const video1 = document.getElementById('video1')
        video1.srcObject = stream
        video1.onloadedmetadata = function () {
          video1.play()
        }
      })
  </script>
</html>
